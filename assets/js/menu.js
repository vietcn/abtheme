;(function(root,factory){'use strict';var define;if(typeof define==='function'&&define.amd){define([],function(){return(root.returnExportsGlobal=factory());});}else if(typeof exports==='object'){module.exports=factory();}else{factory();}}(this,function(){'use strict';function KoalaNav(el,options){if(el.charAt(0)==="#"){var oldEl=el;el=el.substr(1);console.warn('You used "'+ oldEl+'", a jQuery-like selector for your menu selector. This must be written without the "#" and has been converted to "'+ el+'" for you.');}
this.wrapper=document.getElementById(el);this.options={btnIcon:'hamburger',btnPosition:'left',mobileWidth:500};for(var i in options){if(options.hasOwnProperty(i)){this.options[i]=options[i];}}
this.init();}
KoalaNav.prototype.init=function(){this.checkForErrors();this.detectViewportSize();window.addEventListener('resize',this.detectViewportSize.bind(this));this.addMobileMainToggleBtn();this.addMobileSubToggleBtns();this.listenForMobileSubExpand();};KoalaNav.prototype.checkForErrors=function(){if(this.wrapper===null){throw new Error('The element you declared for KoalaNav could not be found in the DOM. Are you sure it exists in your HTML?');}
if(this.options.btnPosition!=='left'&&this.options.btnPosition!=='right'){console.warn('You did not enter a valid btnPosition argument on #'+ this.wrapper.id+'. You used "'+ this.options.btnPosition+'" instead. '+'Now using default btnPosition value.');this.options.btnPosition='left';}
if(this.options.btnIcon!=='hamburger'&&this.options.btnIcon!=='arrow'){console.warn('You did not enter a valid btnIcon argument on #'+ this.wrapper.id+'. You used "'+ this.options.btnIcon+'" instead. '+'Now using default btnIcon value.');this.options.btnIcon='hamburger';}
if(typeof this.options.mobileWidth==="string"){var badUnits,oldWidth;oldWidth=this.options.mobileWidth;badUnits=/px|em|rem/gi;this.options.mobileWidth=this.options.mobileWidth.replace(badUnits,"");this.options.mobileWidth=parseInt(this.options.mobileWidth);console.warn('You used a unit in your mobileWidth argument on #'+ this.wrapper.id+'. Your value was "'+ oldWidth+'" but has been converted to '+ this.options.mobileWidth+'. The mobileWidth option is an integer interpreted as a pixel value.');}
if(this.options.mobileWidth<100){console.warn('You did not enter a mobileWidth value greater than or equal to 100 pixels on #'+ this.wrapper.id+'. You used "'+ this.options.mobileWidth+'" instead. '+'Now using default mobileWidth value.');this.options.mobileWidth=500;}};KoalaNav.prototype.detectViewportSize=function(){if(window.innerWidth<=this.options.mobileWidth){this.addMobileClass();}else{this.addDesktopClass();}};KoalaNav.prototype.addMobileClass=function(){if(this.wrapper.className.search(/navigation-menu--is-mobile/)!==0){this.wrapper.className='navigation-menu--is-mobile';}};KoalaNav.prototype.checkToggleStatus=function(){var toggleBtn=this;if(toggleBtn.parentNode.className.search(/child-menu-open/)>0){if(toggleBtn.tagName!=='A'){toggleBtn.innerHTML='+';}
toggleBtn.parentNode.className=toggleBtn.parentNode.className.replace(/child-menu-open/,'');}else{if(toggleBtn.tagName!=='A'){toggleBtn.innerHTML='&times;';}
toggleBtn.parentNode.className+=' child-menu-open';}};KoalaNav.prototype.listenForMobileSubExpand=function(){var topLevelNav,nav=this;topLevelNav=nav.wrapper.childNodes[0].nextElementSibling;topLevelNav.addEventListener("click",function(e){if(e.target.nodeName=="SPAN"){nav.checkToggleStatus.call(e.target);}});};KoalaNav.prototype.addMobileMainToggleBtn=function(){var toggleMobileBtn;this.wrapper.insertAdjacentHTML('afterbegin','<a class="navigation-menu__mobile-toggle" data-icon="'+ this.options.btnIcon+'">MENU</a>');if(this.wrapper.childNodes[0]){toggleMobileBtn=this.wrapper.childNodes[0];toggleMobileBtn.addEventListener('click',this.checkToggleStatus);if(this.options.btnPosition==='right'){toggleMobileBtn.className+=' btn-align-right';}}else{throw new Error('Could not locate the main toggle button for mobile. Check your HTML to ensure it matches the README example.');}};KoalaNav.prototype.addMobileSubToggleBtns=function(){var listItems=this.wrapper.getElementsByTagName('li');for(var i=0;i<listItems.length;i++){if(listItems[i].getElementsByTagName('ul')[0]){listItems[i].className='has-child-menu';listItems[i].insertAdjacentHTML('afterbegin','<span>+</span>');}}};KoalaNav.prototype.addDesktopClass=function(){if(this.wrapper.className.search(/navigation-menu--is-desktop/)!==0){this.wrapper.className='navigation-menu--is-desktop';}};window.KoalaNav=KoalaNav;}));